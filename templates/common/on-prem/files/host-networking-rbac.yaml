mode: 0644
path: "/etc/kubernetes/manifests/host-networking-rbac.yaml"
contents:
  inline: |
    apiVersion: rbac.authorization.k8s.io/v1
    kind: Role
    metadata:
      name: host-networking-services
      namespace: openshift-{{ onPremPlatformShortName . }}-infra
      annotations:
        include.release.openshift.io/ibm-cloud-managed: "true"
        include.release.openshift.io/self-managed-high-availability: "true"
        include.release.openshift.io/single-node-developer: "true"
    rules:
    - apiGroups: [""]
      resources: ["configmaps"]
      verbs: ["get", "list", "watch"]
    ---
    apiVersion: rbac.authorization.k8s.io/v1
    kind: RoleBinding
    metadata:
      name: host-networking-services
      namespace: openshift-{{ onPremPlatformShortName . }}-infra
      annotations:
        include.release.openshift.io/ibm-cloud-managed: "true"
        include.release.openshift.io/self-managed-high-availability: "true"
        include.release.openshift.io/single-node-developer: "true"
    roleRef:
      apiGroup: rbac.authorization.k8s.io
      kind: Role
      name: host-networking-services
    subjects:
      - kind: ServiceAccount
        namespace: openshift-{{ onPremPlatformShortName . }}-infra
        name: host-networking-services
    ---
    apiVersion: v1
    kind: ServiceAccount
    metadata:
      namespace: openshift-{{ onPremPlatformShortName . }}-infra
      name: host-networking-services
      annotations:
        include.release.openshift.io/ibm-cloud-managed: "true"
        include.release.openshift.io/self-managed-high-availability: "true"
        include.release.openshift.io/single-node-developer: "true"
